# 简化命令模板设计

## 🎯 设计要求

根据您的要求，简化的命令模板只包含以下字段：

### 📋 核心字段
1. **命令模板名称** - 模板的标识名称
2. **子命令（可选）** - 主命令后的子命令列表
3. **选项（可选）** - 命令行选项和标志
4. **参数（可选）** - 位置参数和值参数
5. **符号（可选）** - 按功能分类的特殊符号
6. **分类** - 模板所属的功能分类
7. **标签** - 用于搜索和过滤的标签
8. **常用完整命令** - 预定义的常用命令组合

## 🏗️ 数据结构设计

```javascript
// 简化命令模板结构
const templateStructure = {
  // 基本信息
  name: "git",                    // 命令模板名称
  category: "version-control",    // 分类
  tags: ["git", "版本控制", "vcs"], // 标签
  
  // 可选组件
  subcommands: [                  // 子命令（可选）
    {
      name: "add",
      description: "添加文件到暂存区",
      type: "OPTIONAL"
    }
  ],
  
  options: [                      // 选项（可选）
    {
      name: "message",
      shortFlag: "-m",
      longFlag: "--message",
      description: "提交信息",
      hasParameter: true,
      type: "OPTIONAL"
    }
  ],
  
  parameters: [                   // 参数（可选）
    {
      name: "file",
      description: "文件路径",
      dataType: "FILE",
      type: "OPTIONAL",
      placeholder: "文件路径"
    }
  ],
  
  symbols: [                      // 符号（可选）
    {
      symbol: "&&",
      name: "逻辑与",
      description: "前一个命令成功后执行后一个命令",
      category: "logic"
    }
  ],
  
  commonCommands: [               // 常用完整命令
    {
      name: "快速提交",
      command: "git add . && git commit -m \"update\" && git push",
      description: "添加、提交并推送所有更改",
      frequency: 5
    }
  ]
}
```

## 🔧 符号分类系统

### 符号按功能分类：

1. **管道符号** (pipe)
   - `|` - 管道
   - `|&` - 错误管道

2. **重定向符号** (redirect)
   - `>` - 输出重定向
   - `>>` - 追加重定向
   - `<` - 输入重定向
   - `2>` - 错误重定向

3. **逻辑操作符** (logic)
   - `&&` - 逻辑与
   - `||` - 逻辑或
   - `;` - 顺序执行

4. **后台运行** (background)
   - `&` - 后台运行
   - `nohup` - 忽略挂起

5. **分组符号** (grouping)
   - `()` - 子shell
   - `{}` - 命令组

6. **通配符** (wildcard)
   - `*` - 任意字符
   - `?` - 单个字符
   - `[]` - 字符集

## 📝 使用示例

### 1. Git 命令模板

```javascript
const gitTemplate = {
  name: "git",
  category: "version-control",
  tags: ["git", "版本控制", "vcs"],
  
  subcommands: [
    { name: "add", description: "添加文件到暂存区" },
    { name: "commit", description: "提交更改" },
    { name: "push", description: "推送到远程仓库" }
  ],
  
  options: [
    { name: "message", shortFlag: "-m", description: "提交信息", hasParameter: true },
    { name: "all", shortFlag: "-a", description: "添加所有文件" }
  ],
  
  parameters: [
    { name: "file", description: "文件路径", dataType: "FILE" }
  ],
  
  symbols: [
    { symbol: "&&", name: "逻辑与", category: "logic" }
  ],
  
  commonCommands: [
    {
      name: "快速提交",
      command: "git add . && git commit -m \"update\" && git push",
      description: "添加、提交并推送所有更改"
    }
  ]
}
```

### 2. Docker 命令模板

```javascript
const dockerTemplate = {
  name: "docker",
  category: "container",
  tags: ["docker", "容器", "container"],
  
  subcommands: [
    { name: "run", description: "运行容器" },
    { name: "build", description: "构建镜像" },
    { name: "ps", description: "列出容器" }
  ],
  
  options: [
    { name: "detach", shortFlag: "-d", description: "后台运行" },
    { name: "port", shortFlag: "-p", description: "端口映射", hasParameter: true }
  ],
  
  parameters: [
    { name: "image", description: "镜像名称", dataType: "STRING" }
  ],
  
  symbols: [
    { symbol: "|", name: "管道", category: "pipe" }
  ],
  
  commonCommands: [
    {
      name: "运行Nginx",
      command: "docker run -d -p 80:80 nginx",
      description: "后台运行Nginx容器"
    }
  ]
}
```

### 3. 文件操作模板

```javascript
const fileTemplate = {
  name: "ls",
  category: "filesystem",
  tags: ["文件", "目录", "file"],
  
  options: [
    { name: "long", shortFlag: "-l", description: "详细列表" },
    { name: "all", shortFlag: "-a", description: "显示隐藏文件" }
  ],
  
  parameters: [
    { name: "path", description: "目录路径", dataType: "DIRECTORY" }
  ],
  
  symbols: [
    { symbol: ">", name: "输出重定向", category: "redirect" }
  ],
  
  commonCommands: [
    {
      name: "详细列表",
      command: "ls -la",
      description: "显示所有文件的详细信息"
    }
  ]
}
```

## 🎨 界面设计

### 模板创建界面包含：

1. **基本信息区域**
   - 模板名称输入框
   - 分类选择器
   - 标签管理器

2. **子命令配置区域**
   - 子命令列表
   - 添加/删除按钮
   - 类型选择（可选/必需）

3. **选项配置区域**
   - 选项列表
   - 短/长标志输入
   - 参数设置

4. **参数配置区域**
   - 参数列表
   - 数据类型选择
   - 占位符设置

5. **符号选择区域**
   - 按分类展示符号库
   - 点击添加到模板
   - 符号说明和示例

6. **常用命令区域**
   - 完整命令列表
   - 命令描述
   - 使用频率

7. **预览和操作区域**
   - JSON格式预览
   - 保存/重置/使用按钮

## 🚀 核心功能

### 1. 模板构建器
```javascript
class SimplifiedCommandBuilder {
  constructor(template) {
    this.template = template
    this.selectedSubcommands = []
    this.selectedOptions = new Map()
    this.parameterValues = new Map()
    this.selectedSymbols = []
  }
  
  build() {
    // 构建最终命令字符串
  }
  
  validate() {
    // 验证命令完整性
  }
}
```

### 2. 模板工厂
```javascript
class SimplifiedTemplateFactory {
  static createGitTemplate() { /* ... */ }
  static createDockerTemplate() { /* ... */ }
  static createFileTemplate() { /* ... */ }
}
```

### 3. 符号管理
```javascript
const PredefinedSymbols = {
  pipe: [{ symbol: '|', name: '管道', description: '...' }],
  redirect: [{ symbol: '>', name: '输出重定向', description: '...' }],
  logic: [{ symbol: '&&', name: '逻辑与', description: '...' }]
}
```

## 💡 使用流程

1. **创建模板**
   - 输入基本信息
   - 配置各种可选组件
   - 添加常用命令

2. **使用模板**
   - 选择模板
   - 配置具体参数
   - 构建最终命令

3. **管理模板**
   - 保存自定义模板
   - 分类和标签管理
   - 导入/导出模板

## ✨ 特点优势

1. **极简设计** - 只保留必要字段，去除冗余
2. **灵活配置** - 所有组件都是可选的
3. **符号分类** - 按功能对特殊符号进行分类管理
4. **常用命令** - 预定义常用的完整命令组合
5. **直观界面** - 清晰的分区和操作流程

这个简化设计完全满足您的要求，提供了一个轻量级但功能完整的命令模板系统！ 